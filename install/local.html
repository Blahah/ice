<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Deployment Guide &mdash; ICE 4.1.13 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.1.13',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="ICE 4.1.13 documentation" href="../master.html" />
    <link rel="next" title="Deploying ICE to AWS" href="aws.html" />
    <link rel="prev" title="Inventory of Composable Elements (ICE) Documentation" href="../master.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="aws.html" title="Deploying ICE to AWS"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../master.html" title="Inventory of Composable Elements (ICE) Documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../master.html">ICE 4.1.13 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="deployment-guide">
<h1>Deployment Guide<a class="headerlink" href="#deployment-guide" title="Permalink to this headline">¶</a></h1>
<p>This guide will help you quickly set up an ICE installation
for production use.</p>
<div class="section" id="amazon-web-services-aws">
<h2>Amazon Web Services (AWS)<a class="headerlink" href="#amazon-web-services-aws" title="Permalink to this headline">¶</a></h2>
<p>The easiest way is to use AWS Elastic Beanstalk. Although the setup time is similar to the time for a custom server install, you get additional benefits including automatic security updates, database backups, and automatic monitoring, graphing and notification of server events. The following page will show you how to get started with it.</p>
<p><a class="reference internal" href="aws.html"><em>Deploying ICE to AWS</em></a></p>
</div>
<div class="section" id="custom-server">
<h2>Custom Server<a class="headerlink" href="#custom-server" title="Permalink to this headline">¶</a></h2>
<p>Server setup takes a few steps</p>
<ul class="simple">
<li>installing an SSL certificate</li>
<li>pointing Web server at the ICE war</li>
<li>Set up the database</li>
<li>Set some system properties</li>
<li>Restart the Web server</li>
</ul>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>You&#8217;ll need the following</p>
<ul class="simple">
<li>A Debian (or Debian-like) server</li>
<li>An SSL certificate. You can <a class="reference external" href="https://www.namecheap.com/security/ssl-certificates/comodo.aspx">purchase one here</a> or <a class="reference external" href="http://stackoverflow.com/questions/10175812/how-to-create-a-self-signed-certificate-with-openssl">follow these steps</a> to generate a self-signed certificate.</li>
</ul>
</div>
<div class="section" id="software-installation">
<h3>Software Installation<a class="headerlink" href="#software-installation" title="Permalink to this headline">¶</a></h3>
<p>Install the following software</p>
<ul class="simple">
<li><a class="reference external" href="http://tomcat.apache.org/download-70.cgi">Apache Tomcat</a></li>
<li><a class="reference external" href="http://blast.ncbi.nlm.nih.gov/Blast.cgi?PAGE_TYPE=BlastDocs&amp;DOC_TYPE=Download">BLAST+</a></li>
<li><a class="reference external" href="http://www.postgresql.org/download/">PostgreSQL</a></li>
<li><a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html">Java JDK 7</a></li>
<li><a class="reference external" href="https://maven.apache.org/download.cgi">Maven</a></li>
</ul>
<p>using this command</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get install tomcat7 ncbi-blast+ default-jdk \
  maven postgresql
</pre></div>
</div>
</div>
<div class="section" id="war-installation">
<h3>WAR installation<a class="headerlink" href="#war-installation" title="Permalink to this headline">¶</a></h3>
<p>Download <a class="reference external" href="https://github.com/JBEI/ice/releases">the latest ICE war</a> from Github and make it the ROOT application on your tomcat installation. You may have to delete the existing ROOT application first.</p>
<div class="highlight-python"><div class="highlight"><pre>sudo wget https://github.com/JBEI/ice/releases/download/4.1.14/ice-4.1.14.war \
  --output-file /var/lib/tomcat7/webapps/ROOT.war
</pre></div>
</div>
</div>
<div class="section" id="database-setup">
<h3>Database setup<a class="headerlink" href="#database-setup" title="Permalink to this headline">¶</a></h3>
<p>Create a new PostgreSQL database and create a database user that ICE can use to connect to the database.</p>
<div class="highlight-python"><div class="highlight"><pre>sudo -u postgres psql --command \
  &quot;CREATE DATABASE registry; CREATE USER &#39;tomcat7&#39; WITH PASSWORD &#39;tomcat7&#39;;&quot;
</pre></div>
</div>
</div>
<div class="section" id="set-system-properties">
<h3>Set System Properties<a class="headerlink" href="#set-system-properties" title="Permalink to this headline">¶</a></h3>
<p>In order for ICE to connect to the database, you&#8217;ll need to set some system properties that Tomcat will pass along when starting up. Create the file <code class="docutils literal"><span class="pre">/usr/share/tomcat7/bin/setenv/sh</span></code> and set the <code class="docutils literal"><span class="pre">CATALINA_OPTS</span></code> environment variable.</p>
<div class="highlight-python"><div class="highlight"><pre>sudo echo &quot;export CATALINA_OPTS=&quot;$CATALINA_OPTS \
  -DRDS_HOSTNAME=localhost \
  -DRDS_PORT=5432 \
  -DRDS_DB_NAME=registry \
  -DRDS_username=tomcat7 \
  -DRDS_PASSWORD=tomcat7&quot; &gt; /usr/share/tomcat7/bin/setenv/sh
</pre></div>
</div>
</div>
<div class="section" id="install-the-ssl-certificate">
<h3>Install the SSL Certificate<a class="headerlink" href="#install-the-ssl-certificate" title="Permalink to this headline">¶</a></h3>
<p>Import your certificate into a Tomcat keystore wherevere you like. We&#8217;ll use <code class="docutils literal"><span class="pre">/etc</span></code></p>
<div class="highlight-python"><div class="highlight"><pre>sudo keytool -import -trustcacerts -alias server \
  -keystore /etc/tomcat7/.keystore -file &lt;certificate&gt;
</pre></div>
</div>
<p>Now edit <code class="docutils literal"><span class="pre">/etc/tomcat7/server.xml</span></code> to configure SSL using the keystore by adding the following fragment</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;Connector
     protocol=&quot;org.apache.coyote.http11.Http11Protocol&quot;
     port=&quot;8443&quot; maxThreads=&quot;200&quot;
     scheme=&quot;https&quot; secure=&quot;true&quot; SSLEnabled=&quot;true&quot;
     keystoreFile=&quot;.keystore&quot; keystorePass=&quot;changeit&quot;
     clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot;/&gt;
</pre></div>
</div>
</div>
<div class="section" id="view-the-application">
<h3>View the Application<a class="headerlink" href="#view-the-application" title="Permalink to this headline">¶</a></h3>
<p>Restart Tomcat</p>
<div class="highlight-python"><div class="highlight"><pre>sudo service restart tomcat7
</pre></div>
</div>
<p>And you should now be able to see ICE running at <a class="reference external" href="https://localhost:8443">https://localhost:8443</a>.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../master.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Deployment Guide</a><ul>
<li><a class="reference internal" href="#amazon-web-services-aws">Amazon Web Services (AWS)</a></li>
<li><a class="reference internal" href="#custom-server">Custom Server</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#software-installation">Software Installation</a></li>
<li><a class="reference internal" href="#war-installation">WAR installation</a></li>
<li><a class="reference internal" href="#database-setup">Database setup</a></li>
<li><a class="reference internal" href="#set-system-properties">Set System Properties</a></li>
<li><a class="reference internal" href="#install-the-ssl-certificate">Install the SSL Certificate</a></li>
<li><a class="reference internal" href="#view-the-application">View the Application</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../master.html"
                        title="previous chapter">Inventory of Composable Elements (ICE) Documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="aws.html"
                        title="next chapter">Deploying ICE to AWS</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, JBEI.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.3</a>
      
    </div>

    

    
  </body>
</html>